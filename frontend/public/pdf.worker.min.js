// Simple PDF.js worker shim that tries local node_modules copy or falls back to CDN
// This is loaded by the PdfViewer component to avoid worker loading issues

const pdfjsVersion = '4.8.69'; // Match the version in package.json

// Try to load from local node_modules first, then fallback to CDN
const workerSrc = self.location.origin + '/node_modules/pdfjs-dist/build/pdf.worker.min.js';

try {
  // Attempt to load local worker
  importScripts(workerSrc);
} catch (e) {
  // Fallback to CDN if local fails
  const fallbackSrc = `https://unpkg.com/pdfjs-dist@${pdfjsVersion}/build/pdf.worker.min.js`;
  console.warn('Local PDF worker failed, falling back to CDN:', fallbackSrc);
  importScripts(fallbackSrc);
}